(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0226b501"],{"02f2":function(e,t,r){"use strict";r("744c")},"4d63":function(e,t,r){var n=r("83ab"),s=r("da84"),a=r("94ca"),i=r("7156"),c=r("9bf2").f,o=r("241c").f,u=r("44e7"),l=r("ad6d"),h=r("9f7f"),f=r("6eeb"),d=r("d039"),p=r("69f3").set,g=r("2626"),x=r("b622"),v=x("match"),m=s.RegExp,b=m.prototype,w=/a/g,S=/a/g,k=new m(w)!==w,y=h.UNSUPPORTED_Y,_=n&&a("RegExp",!k||y||d((function(){return S[v]=!1,m(w)!=w||m(S)==S||"/a/i"!=m(w,"i")})));if(_){var H=function(e,t){var r,n=this instanceof H,s=u(e),a=void 0===t;if(!n&&s&&e.constructor===H&&a)return e;k?s&&!a&&(e=e.source):e instanceof H&&(a&&(t=l.call(e)),e=e.source),y&&(r=!!t&&t.indexOf("y")>-1,r&&(t=t.replace(/y/g,"")));var c=i(k?new m(e,t):m(e,t),n?this:b,H);return y&&r&&p(c,{sticky:r}),c},O=function(e){e in H||c(H,e,{configurable:!0,get:function(){return m[e]},set:function(t){m[e]=t}})},T=o(m),R=0;while(T.length>R)O(T[R++]);b.constructor=H,H.prototype=b,f(s,"RegExp",H)}g("RegExp")},"585a":function(e,t,r){"use strict";r("6c1d")},"6c1d":function(e,t,r){},"744c":function(e,t,r){},"9e7a":function(e,t,r){},abeb:function(e,t,r){"use strict";r("9e7a")},efe3:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"search-container"},[r("form",{attrs:{action:"/"}},[r("van-search",{attrs:{"show-action":"",placeholder:"请输入搜索关键词"},on:{search:e.onSearch,cancel:e.onCancel,focus:function(t){e.isResultShow=!1}},model:{value:e.searchText,callback:function(t){e.searchText=t},expression:"searchText"}})],1),e.isResultShow?r("search-result",{attrs:{"search-text":e.searchText}}):e.searchText?r("search-suggestion",{attrs:{"search-text":e.searchText},on:{search:e.onSearch}}):r("search-history",{attrs:{"search-histories":e.searchHistories},on:{search:e.onSearch}})],1)},s=[],a=(r("c975"),r("a434"),r("96cf"),r("1da1")),i=r("5530"),c=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"search-suggestion"},e._l(e.suggestions,(function(t,n){return r("van-cell",{key:n,attrs:{icon:"search"},on:{click:function(r){return e.$emit("search",t)}},scopedSlots:e._u([{key:"title",fn:function(){return[r("div",{domProps:{innerHTML:e._s(e.highlight(t,e.searchText))}})]},proxy:!0}],null,!0)})})),1)},o=[],u=(r("4d63"),r("ac1f"),r("25f0"),r("5319"),r("b775")),l=function(e){return Object(u["a"])({method:"GET",url:"/app/v1_0/suggestion",params:{q:e}})},h=function(e){return Object(u["a"])({method:"GET",url:"/app/v1_0/search",params:e})},f=r("a14a"),d={data:function(){return{suggestions:[]}},props:{searchText:{type:String,required:!0}},watch:{searchText:{handler:Object(f["debounce"])(Object(a["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,l(this.searchText);case 2:t=e.sent,r=t.data,this.suggestions=r.data.options;case 5:case"end":return e.stop()}}),e,this)}))),200),immediate:!0}},methods:{highlight:function(e,t){return e.replace(new RegExp(t,"gi"),'<span style="color: red">'.concat(t,"</span>"))}}},p=d,g=r("2877"),x=Object(g["a"])(p,c,o,!1,null,null,null),v=x.exports,m=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"search-history"},[r("van-cell",{attrs:{title:"搜索历史"}},[e.isDeleteShow?r("div",{staticClass:"alldelete"},[r("span",{on:{click:e.onDelete}},[e._v("全部删除")]),r("span",[e._v("|")]),r("span",{on:{click:function(t){e.isDeleteShow=!1}}},[e._v("完成")])]):r("van-icon",{attrs:{name:"delete"},on:{click:function(t){e.isDeleteShow=!0}}})],1),e._l(e.searchHistories,(function(t,n){return r("van-cell",{key:n,attrs:{title:t,icon:"search"},on:{click:function(r){return e.onHistoryClick(t)}}},[r("van-icon",{directives:[{name:"show",rawName:"v-show",value:e.isDeleteShow,expression:"isDeleteShow"}],attrs:{name:"delete"},on:{click:function(t){return e.searchHistories.splice(n,1)}}})],1)}))],2)},b=[],w={props:{searchHistories:{type:Array,required:!0}},data:function(){return{isDeleteShow:!1}},methods:{onHistoryClick:function(e){console.log("onHistoryClick"),this.isDeleteShow||this.$emit("search",e)},onDelete:function(){this.$parent.searchHistories=[]}}},S=w,k=(r("02f2"),Object(g["a"])(S,m,b,!1,null,"2567cc60",null)),y=k.exports,_=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"search-result"},[r("van-list",{attrs:{finished:e.finished,"finished-text":"没有更多了",error:e.error,"error-text":"请求失败，点击重新加载"},on:{load:e.onLoad,"update:error":function(t){e.error=t}},model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},e._l(e.list,(function(e){return r("van-cell",{key:e.art_id,attrs:{title:e.title,to:{name:"article",params:{articleId:e.art_id}}}})})),1)],1)},H=[],O=r("2909"),T={props:{searchText:{type:String,required:!0}},data:function(){return{list:[],loading:!1,finished:!1,error:!1,page:1,perPage:20}},methods:{onLoad:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var r,n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h({page:e.page,per_page:e.perPage,q:e.searchText});case 3:n=t.sent,s=n.data,console.log(s.data),(r=e.list).push.apply(r,Object(O["a"])(s.data.results)),e.loading=!1,s.data.result?e.page++:e.finished=!0,t.next=15;break;case 11:t.prev=11,t.t0=t["catch"](0),e.loading=!1,e.error=!0;case 15:case"end":return t.stop()}}),t,null,[[0,11]])})))()}}},R=T,j=(r("abeb"),Object(g["a"])(R,_,H,!1,null,"74786515",null)),E=j.exports,C=r("2f62"),D=r("5d2d"),$={data:function(){return{searchText:"",isResultShow:!1,searchHistories:[]}},computed:Object(i["a"])({},Object(C["b"])(["user"])),watch:{searchHistories:function(){Object(D["b"])("search-histories",this.searchHistories)}},methods:{onSearch:function(e){if(e){console.log("xxxxxxx"+e),this.searchText=e;var t=this.searchHistories.indexOf(e);-1!==t&&this.searchHistories.splice(t,1),this.searchHistories.unshift(e),this.isResultShow=!0}},onCancel:function(){this.$router.back()},loadSearchHistories:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:r=Object(D["a"])("search-histories")||[],e.searchHistories=r;case 2:case"end":return t.stop()}}),t)})))()}},created:function(){this.loadSearchHistories()},components:{SearchSuggestion:v,SearchHistory:y,SearchResult:E}},q=$,P=(r("585a"),Object(g["a"])(q,n,s,!1,null,"08728acb",null));t["default"]=P.exports}}]);
//# sourceMappingURL=chunk-0226b501.44baf1b3.js.map