{"version":3,"sources":["webpack:///./src/components/search/search-history.vue?893b","webpack:///./node_modules/core-js/modules/es.regexp.constructor.js","webpack:///./src/views/search/index.vue?4bbe","webpack:///./src/components/search/search-result.vue?47b6","webpack:///./src/views/search/index.vue?f09f","webpack:///./src/components/search/search-suggestion.vue?dae9","webpack:///./src/api/search.js","webpack:///src/components/search/search-suggestion.vue","webpack:///./src/components/search/search-suggestion.vue?0ae1","webpack:///./src/components/search/search-suggestion.vue","webpack:///./src/components/search/search-history.vue?98ae","webpack:///src/components/search/search-history.vue","webpack:///./src/components/search/search-history.vue?5986","webpack:///./src/components/search/search-history.vue","webpack:///./src/components/search/search-result.vue?e45e","webpack:///src/components/search/search-result.vue","webpack:///./src/components/search/search-result.vue?d0c0","webpack:///./src/components/search/search-result.vue","webpack:///src/views/search/index.vue","webpack:///./src/views/search/index.vue?2b70","webpack:///./src/views/search/index.vue"],"names":["DESCRIPTORS","global","isForced","inheritIfRequired","defineProperty","f","getOwnPropertyNames","isRegExp","getFlags","stickyHelpers","redefine","fails","setInternalState","set","setSpecies","wellKnownSymbol","MATCH","NativeRegExp","RegExp","RegExpPrototype","prototype","re1","re2","CORRECT_NEW","UNSUPPORTED_Y","FORCED","RegExpWrapper","pattern","flags","sticky","thisIsRegExp","this","patternIsRegExp","flagsAreUndefined","undefined","constructor","source","call","indexOf","replace","result","proxy","key","configurable","get","it","keys","index","length","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","on","onSearch","onCancel","$event","isResultShow","model","value","callback","$$v","searchText","expression","searchHistories","staticRenderFns","_l","item","$emit","scopedSlots","_u","fn","domProps","_s","highlight","getSearchSuggestions","q","request","method","url","params","getSearchResult","data","suggestions","props","type","String","required","watch","handler","immediate","methods","keyword","component","onDelete","_v","isDeleteShow","history","onHistoryClick","directives","name","rawName","splice","Array","console","log","$parent","finished","error","onLoad","loading","art_id","title","articleId","list","page","perPage","computed","sText","unshift","$router","back","created","loadSearchHistories","components","SearchSuggestion","SearchHistory","SearchResult"],"mappings":"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","file":"js/chunk-0226b501.44baf1b3.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./search-history.vue?vue&type=style&index=0&id=2567cc60&lang=scss&scoped=true&\"","var DESCRIPTORS = require('../internals/descriptors');\nvar global = require('../internals/global');\nvar isForced = require('../internals/is-forced');\nvar inheritIfRequired = require('../internals/inherit-if-required');\nvar defineProperty = require('../internals/object-define-property').f;\nvar getOwnPropertyNames = require('../internals/object-get-own-property-names').f;\nvar isRegExp = require('../internals/is-regexp');\nvar getFlags = require('../internals/regexp-flags');\nvar stickyHelpers = require('../internals/regexp-sticky-helpers');\nvar redefine = require('../internals/redefine');\nvar fails = require('../internals/fails');\nvar setInternalState = require('../internals/internal-state').set;\nvar setSpecies = require('../internals/set-species');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar MATCH = wellKnownSymbol('match');\nvar NativeRegExp = global.RegExp;\nvar RegExpPrototype = NativeRegExp.prototype;\nvar re1 = /a/g;\nvar re2 = /a/g;\n\n// \"new\" should create a new object, old webkit bug\nvar CORRECT_NEW = new NativeRegExp(re1) !== re1;\n\nvar UNSUPPORTED_Y = stickyHelpers.UNSUPPORTED_Y;\n\nvar FORCED = DESCRIPTORS && isForced('RegExp', (!CORRECT_NEW || UNSUPPORTED_Y || fails(function () {\n  re2[MATCH] = false;\n  // RegExp constructor can alter flags and IsRegExp works correct with @@match\n  return NativeRegExp(re1) != re1 || NativeRegExp(re2) == re2 || NativeRegExp(re1, 'i') != '/a/i';\n})));\n\n// `RegExp` constructor\n// https://tc39.es/ecma262/#sec-regexp-constructor\nif (FORCED) {\n  var RegExpWrapper = function RegExp(pattern, flags) {\n    var thisIsRegExp = this instanceof RegExpWrapper;\n    var patternIsRegExp = isRegExp(pattern);\n    var flagsAreUndefined = flags === undefined;\n    var sticky;\n\n    if (!thisIsRegExp && patternIsRegExp && pattern.constructor === RegExpWrapper && flagsAreUndefined) {\n      return pattern;\n    }\n\n    if (CORRECT_NEW) {\n      if (patternIsRegExp && !flagsAreUndefined) pattern = pattern.source;\n    } else if (pattern instanceof RegExpWrapper) {\n      if (flagsAreUndefined) flags = getFlags.call(pattern);\n      pattern = pattern.source;\n    }\n\n    if (UNSUPPORTED_Y) {\n      sticky = !!flags && flags.indexOf('y') > -1;\n      if (sticky) flags = flags.replace(/y/g, '');\n    }\n\n    var result = inheritIfRequired(\n      CORRECT_NEW ? new NativeRegExp(pattern, flags) : NativeRegExp(pattern, flags),\n      thisIsRegExp ? this : RegExpPrototype,\n      RegExpWrapper\n    );\n\n    if (UNSUPPORTED_Y && sticky) setInternalState(result, { sticky: sticky });\n\n    return result;\n  };\n  var proxy = function (key) {\n    key in RegExpWrapper || defineProperty(RegExpWrapper, key, {\n      configurable: true,\n      get: function () { return NativeRegExp[key]; },\n      set: function (it) { NativeRegExp[key] = it; }\n    });\n  };\n  var keys = getOwnPropertyNames(NativeRegExp);\n  var index = 0;\n  while (keys.length > index) proxy(keys[index++]);\n  RegExpPrototype.constructor = RegExpWrapper;\n  RegExpWrapper.prototype = RegExpPrototype;\n  redefine(global, 'RegExp', RegExpWrapper);\n}\n\n// https://tc39.es/ecma262/#sec-get-regexp-@@species\nsetSpecies('RegExp');\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=08728acb&lang=scss&scoped=true&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./search-result.vue?vue&type=style&index=0&id=74786515&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"search-container\"},[_c('form',{attrs:{\"action\":\"/\"}},[_c('van-search',{attrs:{\"show-action\":\"\",\"placeholder\":\"请输入搜索关键词\"},on:{\"search\":_vm.onSearch,\"cancel\":_vm.onCancel,\"focus\":function($event){_vm.isResultShow = false}},model:{value:(_vm.searchText),callback:function ($$v) {_vm.searchText=$$v},expression:\"searchText\"}})],1),(_vm.isResultShow)?_c('search-result',{attrs:{\"search-text\":_vm.searchText}}):(_vm.searchText)?_c('search-suggestion',{attrs:{\"search-text\":_vm.searchText},on:{\"search\":_vm.onSearch}}):_c('search-history',{attrs:{\"search-histories\":_vm.searchHistories},on:{\"search\":_vm.onSearch}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"search-suggestion\"},_vm._l((_vm.suggestions),function(item,index){return _c('van-cell',{key:index,attrs:{\"icon\":\"search\"},on:{\"click\":function($event){return _vm.$emit('search', item)}},scopedSlots:_vm._u([{key:\"title\",fn:function(){return [_c('div',{domProps:{\"innerHTML\":_vm._s(_vm.highlight(item,_vm.searchText))}})]},proxy:true}],null,true)})}),1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import request from '../utils/request.js'\r\n\r\nexport const getSearchSuggestions = q => {\r\n  return request({\r\n    method: 'GET',\r\n    url: '/app/v1_0/suggestion',\r\n    params: {\r\n      q\r\n    }\r\n  })\r\n}\r\n\r\nexport const getSearchResult = params => {\r\n  return request({\r\n    method: 'GET',\r\n    url: '/app/v1_0/search',\r\n    params\r\n  })\r\n}\r\n\r\nexport const getSearchHistories = () => {\r\n  return request({\r\n    method: 'GET',\r\n    url: '/app/v1_0/search/histories'\r\n  })\r\n}\r\n","<template>\r\n  <div class=\"search-suggestion\">\r\n      <van-cell icon=\"search\" @click=\"$emit('search', item)\" v-for=\"(item,index) in suggestions\" :key=\"index\">\r\n        <template #title>\r\n          <div v-html=\"highlight(item,searchText)\"></div>\r\n        </template>\r\n      </van-cell>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getSearchSuggestions } from '../../api/search'\r\nimport { debounce } from 'lodash'\r\nexport default {\r\n  data () {\r\n    return {\r\n      suggestions: []\r\n    }\r\n  },\r\n  props: {\r\n    searchText: {\r\n      type: String,\r\n      required: true\r\n    }\r\n  },\r\n  watch: {\r\n    searchText: {\r\n      handler: debounce(async function () {\r\n        const { data } = await getSearchSuggestions(this.searchText)\r\n        this.suggestions = data.data.options\r\n      }, 200),\r\n      immediate: true\r\n\r\n    }\r\n  },\r\n  methods: {\r\n    highlight (source, keyword) {\r\n      return source.replace(new RegExp(keyword, 'gi'), `<span style=\"color: red\">${keyword}</span>`)\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./search-suggestion.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./search-suggestion.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./search-suggestion.vue?vue&type=template&id=23de64e4&\"\nimport script from \"./search-suggestion.vue?vue&type=script&lang=js&\"\nexport * from \"./search-suggestion.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"search-history\"},[_c('van-cell',{attrs:{\"title\":\"搜索历史\"}},[(_vm.isDeleteShow)?_c('div',{staticClass:\"alldelete\"},[_c('span',{on:{\"click\":_vm.onDelete}},[_vm._v(\"全部删除\")]),_c('span',[_vm._v(\"|\")]),_c('span',{on:{\"click\":function($event){_vm.isDeleteShow = false}}},[_vm._v(\"完成\")])]):_c('van-icon',{attrs:{\"name\":\"delete\"},on:{\"click\":function($event){_vm.isDeleteShow = true}}})],1),_vm._l((_vm.searchHistories),function(history,index){return _c('van-cell',{key:index,attrs:{\"title\":history,\"icon\":\"search\"},on:{\"click\":function($event){return _vm.onHistoryClick(history)}}},[_c('van-icon',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isDeleteShow),expression:\"isDeleteShow\"}],attrs:{\"name\":\"delete\"},on:{\"click\":function($event){return _vm.searchHistories.splice(index, 1)}}})],1)})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"search-history\">\r\n    <van-cell title=\"搜索历史\">\r\n      <div class=\"alldelete\" v-if=\"isDeleteShow\">\r\n        <span @click=\"onDelete\">全部删除</span>\r\n        <span>|</span>\r\n        <span @click=\"isDeleteShow = false\">完成</span>\r\n      </div>\r\n\r\n      <van-icon name=\"delete\" v-else @click=\"isDeleteShow = true\"/>\r\n    </van-cell>\r\n\r\n    <van-cell v-for=\"(history, index) in searchHistories\" :key=\"index\" :title=\"history\"  icon=\"search\" @click=\"onHistoryClick(history)\">\r\n      <van-icon name=\"delete\" v-show=\"isDeleteShow\" @click=\"searchHistories.splice(index, 1)\"/>\r\n    </van-cell>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n// import { setItem } from '../../utils/storage'\r\nexport default {\r\n  props: {\r\n    searchHistories: {\r\n      type: Array,\r\n      required: true\r\n    }\r\n  },\r\n  data () {\r\n    return {\r\n      isDeleteShow: false\r\n    }\r\n  },\r\n  methods: {\r\n    onHistoryClick (history) {\r\n      console.log('onHistoryClick')\r\n      if (!this.isDeleteShow) {\r\n        this.$emit('search', history)\r\n      }\r\n    },\r\n    onDelete () {\r\n      // 注意：props是对象时，只能作修改，不能赋值，赋值改地址，原数据不变\r\n      // this.searchHistories = []\r\n      // setItem('search-histories', this.searchHistories)\r\n\r\n      this.$parent.searchHistories = []\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n  .search-history{\r\n    .alldelete span{\r\n      &:first-child{\r\n        margin-right: 5px !important;\r\n      }\r\n      &:last-child{\r\n        margin-left: 5px !important;\r\n      }\r\n    }\r\n  }\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./search-history.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./search-history.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./search-history.vue?vue&type=template&id=2567cc60&scoped=true&\"\nimport script from \"./search-history.vue?vue&type=script&lang=js&\"\nexport * from \"./search-history.vue?vue&type=script&lang=js&\"\nimport style0 from \"./search-history.vue?vue&type=style&index=0&id=2567cc60&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2567cc60\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"search-result\"},[_c('van-list',{attrs:{\"finished\":_vm.finished,\"finished-text\":\"没有更多了\",\"error\":_vm.error,\"error-text\":\"请求失败，点击重新加载\"},on:{\"load\":_vm.onLoad,\"update:error\":function($event){_vm.error=$event}},model:{value:(_vm.loading),callback:function ($$v) {_vm.loading=$$v},expression:\"loading\"}},_vm._l((_vm.list),function(item){return _c('van-cell',{key:item.art_id,attrs:{\"title\":item.title,\"to\":{name:'article', params:{articleId: item.art_id}}}})}),1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"search-result\">\r\n    <van-list\r\n      v-model=\"loading\"\r\n      :finished=\"finished\"\r\n      finished-text=\"没有更多了\"\r\n      @load=\"onLoad\"\r\n      :error.sync=\"error\"\r\n       error-text=\"请求失败，点击重新加载\"\r\n    >\r\n      <van-cell v-for=\"item in list\" :key=\"item.art_id\" :title=\"item.title\" :to=\"{name:'article', params:{articleId: item.art_id}}\"/>\r\n    </van-list>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getSearchResult } from '@/api/search'\r\nexport default {\r\n  props: {\r\n    searchText: {\r\n      type: String,\r\n      required: true\r\n    }\r\n  },\r\n  data () {\r\n    return {\r\n      list: [],\r\n      loading: false,\r\n      finished: false,\r\n      error: false,\r\n      page: 1,\r\n      perPage: 20\r\n    }\r\n  },\r\n  methods: {\r\n    async onLoad () {\r\n      try {\r\n        const { data } = await getSearchResult({\r\n          page: this.page,\r\n          per_page: this.perPage,\r\n          q: this.searchText\r\n        })\r\n        console.log(data.data)\r\n\r\n        this.list.push(...data.data.results)\r\n\r\n        this.loading = false\r\n\r\n        if (data.data.result) {\r\n          this.page++\r\n        } else {\r\n          this.finished = true\r\n        }\r\n      } catch (error) {\r\n        this.loading = false\r\n        this.error = true\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n  .search-result{\r\n    position: fixed;\r\n    left: 0;\r\n    right: 0;\r\n    top: 54px;\r\n    bottom: 0;\r\n    overflow-y: auto;\r\n  }\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./search-result.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./search-result.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./search-result.vue?vue&type=template&id=74786515&scoped=true&\"\nimport script from \"./search-result.vue?vue&type=script&lang=js&\"\nexport * from \"./search-result.vue?vue&type=script&lang=js&\"\nimport style0 from \"./search-result.vue?vue&type=style&index=0&id=74786515&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"74786515\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n    <div class=\"search-container\">\r\n        <form action=\"/\">\r\n            <van-search\r\n                v-model=\"searchText\"\r\n                show-action\r\n                placeholder=\"请输入搜索关键词\"\r\n                @search=\"onSearch\"\r\n                @cancel=\"onCancel\"\r\n                @focus='isResultShow = false'\r\n\r\n            />\r\n        </form>\r\n\r\n        <search-result :search-text='searchText' v-if=\"isResultShow\"></search-result>\r\n        <search-suggestion @search='onSearch' :search-text='searchText' v-else-if=\"searchText\"></search-suggestion>\r\n        <search-history v-else :search-histories='searchHistories' @search='onSearch'></search-history>\r\n\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport SearchSuggestion from '../../components/search/search-suggestion'\r\nimport SearchHistory from '../../components/search/search-history'\r\nimport SearchResult from '../../components/search/search-result'\r\n\r\n// import { getSearchHistories } from '../../api/search'\r\n\r\nimport { mapState } from 'vuex'\r\nimport { getItem, setItem } from '../../utils/storage'\r\nexport default {\r\n  data () {\r\n    return {\r\n      searchText: '',\r\n      isResultShow: false,\r\n\r\n      searchHistories: []\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapState(['user'])\r\n  },\r\n  watch: {\r\n    searchHistories () {\r\n      setItem('search-histories', this.searchHistories)\r\n    }\r\n  },\r\n  methods: {\r\n    onSearch (sText) {\r\n      if (!sText) return\r\n      console.log('xxxxxxx' + sText)\r\n      this.searchText = sText\r\n\r\n      const index = this.searchHistories.indexOf(sText)\r\n      if (index !== -1) {\r\n        this.searchHistories.splice(index, 1)\r\n      }\r\n      this.searchHistories.unshift(sText)\r\n\r\n      this.isResultShow = true\r\n    },\r\n    onCancel () {\r\n      this.$router.back()\r\n    },\r\n    async loadSearchHistories () {\r\n      const searchHistories = getItem('search-histories') || []\r\n      // if (this.user) {\r\n      //   const { data } = await getSearchHistories()\r\n      //   console.log(data.data.keywords)\r\n\r\n      //   searchHistories = [...new Set([...searchHistories, ...data.data.keywords])]\r\n      // }\r\n\r\n      this.searchHistories = searchHistories\r\n    }\r\n  },\r\n  created () {\r\n    this.loadSearchHistories()\r\n  },\r\n  components: {\r\n    SearchSuggestion,\r\n    SearchHistory,\r\n    SearchResult\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n  .search-container{\r\n    ::v-deep .van-search{\r\n      background-color: #3296fa;\r\n    }\r\n    ::v-deep .van-search__action{\r\n      color: #fff;\r\n    }\r\n  }\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=08728acb&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=08728acb&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"08728acb\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}