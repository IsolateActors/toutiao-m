(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-cacb23b2"],{"07fd":function(t,e,i){},"0a3b":function(t,e,i){"use strict";i("c34c")},"230c":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"article-container"},[i("van-nav-bar",{attrs:{title:"文章详情","left-arrow":""},on:{"click-left":function(e){return t.$router.back()}}}),i("div",{staticClass:"article-wrap"},[i("h1",{ref:"h1",staticClass:"title"},[t._v(t._s(t.article.title))]),i("van-cell",{staticClass:"user-info",attrs:{center:"",title:t.article.aut_name,label:t._f("relativeTime")(t.article.pubdate)},scopedSlots:t._u([{key:"icon",fn:function(){return[i("van-image",{staticClass:"avatar",attrs:{round:"",fit:"cover",src:t.article.aut_photo}})]},proxy:!0},{key:"extra",fn:function(){return[i("van-button",{staticClass:"follow-btn",attrs:{type:t.article.is_followed?"default":"info",icon:t.article.is_followed?"":"plus",round:"",size:"small",loading:t.isFollowLoading},on:{click:t.onFollow}},[t._v(t._s(t.article.is_followed?"已关注":"关注"))])]},proxy:!0}])}),i("div",{ref:"article-content",staticClass:"markdown-body",domProps:{innerHTML:t._s(t.article.content)}}),i("comment-list",{ref:"comment-list",attrs:{list:t.commentList,source:t.articleId},on:{"update-total-count":function(e){t.totalCommentCount=e},"reply-click":t.onReplayClick}})],1),i("div",{staticClass:"article-bottom"},[i("van-button",{staticClass:"comment-btn",attrs:{plain:"",round:"",size:"small",hairline:"",type:"default"},on:{click:function(e){t.isPostShow=!0}}},[t._v("写评论")]),i("van-icon",{attrs:{name:"comment-o",badge:t.totalCommentCount,color:"#777"},on:{click:t.onComment}}),i("van-icon",{attrs:{color:t.article.is_collected?"orange":"#777",name:t.article.is_collected?"star":"star-o"},on:{click:t.onCollect}}),i("van-icon",{attrs:{color:1===t.article.attitude?"hotpink":"#777",name:1===t.article.attitude?"good-job":"good-job-o"},on:{click:t.onLike}})],1),i("van-popup",{attrs:{position:"bottom"},model:{value:t.isPostShow,callback:function(e){t.isPostShow=e},expression:"isPostShow"}},[i("post-comment",{attrs:{target:t.articleId},on:{"post-fail":function(e){t.isPostShow=!1},"post-success":t.onPostSuccess}})],1),i("van-popup",{staticStyle:{height:"90%"},attrs:{position:"bottom"},model:{value:t.isReplyShow,callback:function(e){t.isReplyShow=e},expression:"isReplyShow"}},[t.isReplyShow?i("comment-reply",{attrs:{comment:t.replyComment,"article-id":t.articleId},on:{close:function(e){t.isReplyShow=!1}}}):t._e()],1)],1)},o=[],s=(i("4160"),i("a9e3"),i("159b"),i("96cf"),i("1da1")),a=(i("07fd"),i("2423")),r=i("c31d"),c=i("2b0e"),l=i("d282"),u=Object(l["a"])("image-preview"),h=u[0],m=u[1],f=i("6605"),d=i("3875"),p=i("5fbe"),v=i("ad06"),g=i("02de"),b=i("1325"),y=i("4598"),w=i("482d"),S=i("9884"),x=Object(l["a"])("swipe"),C=x[0],k=x[1],_=C({mixins:[d["a"],Object(S["b"])("vanSwipe"),Object(p["a"])((function(t,e){t(window,"resize",this.resize,!0),t(window,"orientationchange",this.resize,!0),t(window,"visibilitychange",this.onVisibilityChange),e?this.initialize():this.clear()}))],props:{width:[Number,String],height:[Number,String],autoplay:[Number,String],vertical:Boolean,lazyRender:Boolean,indicatorColor:String,loop:{type:Boolean,default:!0},duration:{type:[Number,String],default:500},touchable:{type:Boolean,default:!0},initialSwipe:{type:[Number,String],default:0},showIndicators:{type:Boolean,default:!0},stopPropagation:{type:Boolean,default:!0}},data:function(){return{rect:null,offset:0,active:0,deltaX:0,deltaY:0,swiping:!1,computedWidth:0,computedHeight:0}},watch:{children:function(){this.initialize()},initialSwipe:function(){this.initialize()},autoplay:function(t){t>0?this.autoPlay():this.clear()}},computed:{count:function(){return this.children.length},maxCount:function(){return Math.ceil(Math.abs(this.minOffset)/this.size)},delta:function(){return this.vertical?this.deltaY:this.deltaX},size:function(){return this[this.vertical?"computedHeight":"computedWidth"]},trackSize:function(){return this.count*this.size},activeIndicator:function(){return(this.active+this.count)%this.count},isCorrectDirection:function(){var t=this.vertical?"vertical":"horizontal";return this.direction===t},trackStyle:function(){var t={transitionDuration:(this.swiping?0:this.duration)+"ms",transform:"translate"+(this.vertical?"Y":"X")+"("+this.offset+"px)"};if(this.size){var e=this.vertical?"height":"width",i=this.vertical?"width":"height";t[e]=this.trackSize+"px",t[i]=this[i]?this[i]+"px":""}return t},indicatorStyle:function(){return{backgroundColor:this.indicatorColor}},minOffset:function(){return(this.vertical?this.rect.height:this.rect.width)-this.size*this.count}},mounted:function(){this.bindTouchEvent(this.$refs.track)},methods:{initialize:function(t){if(void 0===t&&(t=+this.initialSwipe),this.$el&&!Object(g["a"])(this.$el)){clearTimeout(this.timer);var e=this.$el.getBoundingClientRect();this.rect=e,this.swiping=!0,this.active=t,this.computedWidth=+this.width||e.width,this.computedHeight=+this.height||e.height,this.offset=this.getTargetOffset(t),this.children.forEach((function(t){t.offset=0})),this.autoPlay()}},resize:function(){this.initialize(this.activeIndicator)},onVisibilityChange:function(){document.hidden?this.clear():this.autoPlay()},onTouchStart:function(t){this.touchable&&(this.clear(),this.touchStartTime=Date.now(),this.touchStart(t),this.correctPosition())},onTouchMove:function(t){this.touchable&&this.swiping&&(this.touchMove(t),this.isCorrectDirection&&(Object(b["c"])(t,this.stopPropagation),this.move({offset:this.delta})))},onTouchEnd:function(){if(this.touchable&&this.swiping){var t=this.size,e=this.delta,i=Date.now()-this.touchStartTime,n=e/i,o=Math.abs(n)>.25||Math.abs(e)>t/2;if(o&&this.isCorrectDirection){var s=this.vertical?this.offsetY:this.offsetX,a=0;a=this.loop?s>0?e>0?-1:1:0:-Math[e>0?"ceil":"floor"](e/t),this.move({pace:a,emitChange:!0})}else e&&this.move({pace:0});this.swiping=!1,this.autoPlay()}},getTargetActive:function(t){var e=this.active,i=this.count,n=this.maxCount;return t?this.loop?Object(w["b"])(e+t,-1,i):Object(w["b"])(e+t,0,n):e},getTargetOffset:function(t,e){void 0===e&&(e=0);var i=t*this.size;this.loop||(i=Math.min(i,-this.minOffset));var n=e-i;return this.loop||(n=Object(w["b"])(n,this.minOffset,0)),n},move:function(t){var e=t.pace,i=void 0===e?0:e,n=t.offset,o=void 0===n?0:n,s=t.emitChange,a=this.loop,r=this.count,c=this.active,l=this.children,u=this.trackSize,h=this.minOffset;if(!(r<=1)){var m=this.getTargetActive(i),f=this.getTargetOffset(m,o);if(a){if(l[0]&&f!==h){var d=f<h;l[0].offset=d?u:0}if(l[r-1]&&0!==f){var p=f>0;l[r-1].offset=p?-u:0}}this.active=m,this.offset=f,s&&m!==c&&this.$emit("change",this.activeIndicator)}},prev:function(){var t=this;this.correctPosition(),this.resetTouchStatus(),Object(y["b"])((function(){t.swiping=!1,t.move({pace:-1,emitChange:!0})}))},next:function(){var t=this;this.correctPosition(),this.resetTouchStatus(),Object(y["b"])((function(){t.swiping=!1,t.move({pace:1,emitChange:!0})}))},swipeTo:function(t,e){var i=this;void 0===e&&(e={}),this.correctPosition(),this.resetTouchStatus(),Object(y["b"])((function(){var n;n=i.loop&&t===i.count?0===i.active?0:t:t%i.count,e.immediate?Object(y["b"])((function(){i.swiping=!1})):i.swiping=!1,i.move({pace:n-i.active,emitChange:!0})}))},correctPosition:function(){this.swiping=!0,this.active<=-1&&this.move({pace:this.count}),this.active>=this.count&&this.move({pace:-this.count})},clear:function(){clearTimeout(this.timer)},autoPlay:function(){var t=this,e=this.autoplay;e>0&&this.count>1&&(this.clear(),this.timer=setTimeout((function(){t.next(),t.autoPlay()}),e))},genIndicator:function(){var t=this,e=this.$createElement,i=this.count,n=this.activeIndicator,o=this.slots("indicator");return o||(this.showIndicators&&i>1?e("div",{class:k("indicators",{vertical:this.vertical})},[Array.apply(void 0,Array(i)).map((function(i,o){return e("i",{class:k("indicator",{active:o===n}),style:o===n?t.indicatorStyle:null})}))]):void 0)}},render:function(){var t=arguments[0];return t("div",{class:k()},[t("div",{ref:"track",style:this.trackStyle,class:k("track",{vertical:this.vertical})},[this.slots()]),this.genIndicator()])}}),O=i("44bf"),j=i("543e"),T=Object(l["a"])("swipe-item"),I=T[0],$=T[1],P=I({mixins:[Object(S["a"])("vanSwipe")],data:function(){return{offset:0,inited:!1,mounted:!1}},mounted:function(){var t=this;this.$nextTick((function(){t.mounted=!0}))},computed:{style:function(){var t={},e=this.parent,i=e.size,n=e.vertical;return i&&(t[n?"height":"width"]=i+"px"),this.offset&&(t.transform="translate"+(n?"Y":"X")+"("+this.offset+"px)"),t},shouldRender:function(){var t=this.index,e=this.inited,i=this.parent,n=this.mounted;if(!i.lazyRender||e)return!0;if(!n)return!1;var o=i.activeIndicator,s=i.count-1,a=0===o&&i.loop?s:o-1,r=o===s&&i.loop?0:o+1,c=t===o||t===a||t===r;return c&&(this.inited=!0),c}},render:function(){var t=arguments[0];return t("div",{class:$(),style:this.style,on:Object(r["a"])({},this.$listeners)},[this.shouldRender&&this.slots()])}});function E(t){return Math.sqrt(Math.pow(t[0].clientX-t[1].clientX,2)+Math.pow(t[0].clientY-t[1].clientY,2))}var R,z={mixins:[d["a"]],props:{src:String,show:Boolean,active:Number,minZoom:[Number,String],maxZoom:[Number,String],rootWidth:Number,rootHeight:Number},data:function(){return{scale:1,moveX:0,moveY:0,moving:!1,zooming:!1,imageRatio:0,displayWidth:0,displayHeight:0}},computed:{vertical:function(){var t=this.rootWidth,e=this.rootHeight,i=e/t;return this.imageRatio>i},imageStyle:function(){var t=this.scale,e={transitionDuration:this.zooming||this.moving?"0s":".3s"};if(1!==t){var i=this.moveX/t,n=this.moveY/t;e.transform="scale("+t+", "+t+") translate("+i+"px, "+n+"px)"}return e},maxMoveX:function(){if(this.imageRatio){var t=this.vertical?this.rootHeight/this.imageRatio:this.rootWidth;return Math.max(0,(this.scale*t-this.rootWidth)/2)}return 0},maxMoveY:function(){if(this.imageRatio){var t=this.vertical?this.rootHeight:this.rootWidth*this.imageRatio;return Math.max(0,(this.scale*t-this.rootHeight)/2)}return 0}},watch:{active:"resetScale",show:function(t){t||this.resetScale()}},mounted:function(){this.bindTouchEvent(this.$el)},methods:{resetScale:function(){this.setScale(1),this.moveX=0,this.moveY=0},setScale:function(t){t=Object(w["b"])(t,+this.minZoom,+this.maxZoom),t!==this.scale&&(this.scale=t,this.$emit("scale",{scale:this.scale,index:this.active}))},toggleScale:function(){var t=this.scale>1?1:2;this.setScale(t),this.moveX=0,this.moveY=0},onTouchStart:function(t){var e=t.touches,i=this.offsetX,n=void 0===i?0:i;this.touchStart(t),this.touchStartTime=new Date,this.startMoveX=this.moveX,this.startMoveY=this.moveY,this.moving=1===e.length&&1!==this.scale,this.zooming=2===e.length&&!n,this.zooming&&(this.startScale=this.scale,this.startDistance=E(t.touches))},onTouchMove:function(t){var e=t.touches;if(this.touchMove(t),(this.moving||this.zooming)&&Object(b["c"])(t,!0),this.moving){var i=this.deltaX+this.startMoveX,n=this.deltaY+this.startMoveY;this.moveX=Object(w["b"])(i,-this.maxMoveX,this.maxMoveX),this.moveY=Object(w["b"])(n,-this.maxMoveY,this.maxMoveY)}if(this.zooming&&2===e.length){var o=E(e),s=this.startScale*o/this.startDistance;this.setScale(s)}},onTouchEnd:function(t){var e=!1;(this.moving||this.zooming)&&(e=!0,this.moving&&this.startMoveX===this.moveX&&this.startMoveY===this.moveY&&(e=!1),t.touches.length||(this.zooming&&(this.moveX=Object(w["b"])(this.moveX,-this.maxMoveX,this.maxMoveX),this.moveY=Object(w["b"])(this.moveY,-this.maxMoveY,this.maxMoveY),this.zooming=!1),this.moving=!1,this.startMoveX=0,this.startMoveY=0,this.startScale=1,this.scale<1&&this.resetScale())),Object(b["c"])(t,e),this.checkTap(),this.resetTouchStatus()},checkTap:function(){var t=this,e=this.offsetX,i=void 0===e?0:e,n=this.offsetY,o=void 0===n?0:n,s=new Date-this.touchStartTime,a=250,r=10;i<r&&o<r&&s<a&&(this.doubleTapTimer?(clearTimeout(this.doubleTapTimer),this.doubleTapTimer=null,this.toggleScale()):this.doubleTapTimer=setTimeout((function(){t.$emit("close"),t.doubleTapTimer=null}),a))},onLoad:function(t){var e=t.target,i=e.naturalWidth,n=e.naturalHeight;this.imageRatio=n/i}},render:function(){var t=arguments[0],e={loading:function(){return t(j["a"],{attrs:{type:"spinner"}})}};return t(P,{class:m("swipe-item")},[t(O["a"],{attrs:{src:this.src,fit:"contain"},class:m("image",{vertical:this.vertical}),style:this.imageStyle,scopedSlots:e,on:{load:this.onLoad}})])}},A=h({mixins:[d["a"],Object(f["a"])({skipToggleEvent:!0}),Object(p["a"])((function(t){t(window,"resize",this.resize,!0),t(window,"orientationchange",this.resize,!0)}))],props:{className:null,closeable:Boolean,asyncClose:Boolean,showIndicators:Boolean,images:{type:Array,default:function(){return[]}},loop:{type:Boolean,default:!0},overlay:{type:Boolean,default:!0},minZoom:{type:[Number,String],default:1/3},maxZoom:{type:[Number,String],default:3},showIndex:{type:Boolean,default:!0},swipeDuration:{type:[Number,String],default:300},startPosition:{type:[Number,String],default:0},overlayClass:{type:String,default:m("overlay")},closeIcon:{type:String,default:"clear"},closeOnPopstate:{type:Boolean,default:!0},closeIconPosition:{type:String,default:"top-right"}},data:function(){return{active:0,rootWidth:0,rootHeight:0,doubleClickTimer:null}},mounted:function(){this.resize()},watch:{startPosition:"setActive",value:function(t){var e=this;t?(this.setActive(+this.startPosition),this.$nextTick((function(){e.resize(),e.$refs.swipe.swipeTo(+e.startPosition,{immediate:!0})}))):this.$emit("close",{index:this.active,url:this.images[this.active]})}},methods:{resize:function(){if(this.$el&&this.$el.getBoundingClientRect){var t=this.$el.getBoundingClientRect();this.rootWidth=t.width,this.rootHeight=t.height}},emitClose:function(){this.asyncClose||this.$emit("input",!1)},emitScale:function(t){this.$emit("scale",t)},setActive:function(t){t!==this.active&&(this.active=t,this.$emit("change",t))},genIndex:function(){var t=this.$createElement;if(this.showIndex)return t("div",{class:m("index")},[this.slots("index",{index:this.active})||this.active+1+" / "+this.images.length])},genCover:function(){var t=this.$createElement,e=this.slots("cover");if(e)return t("div",{class:m("cover")},[e])},genImages:function(){var t=this,e=this.$createElement;return e(_,{ref:"swipe",attrs:{lazyRender:!0,loop:this.loop,duration:this.swipeDuration,initialSwipe:this.startPosition,showIndicators:this.showIndicators,indicatorColor:"white"},class:m("swipe"),on:{change:this.setActive}},[this.images.map((function(i){return e(z,{attrs:{src:i,show:t.value,active:t.active,maxZoom:t.maxZoom,minZoom:t.minZoom,rootWidth:t.rootWidth,rootHeight:t.rootHeight},on:{scale:t.emitScale,close:t.emitClose}})}))])},genClose:function(){var t=this.$createElement;if(this.closeable)return t(v["a"],{attrs:{role:"button",name:this.closeIcon},class:m("close-icon",this.closeIconPosition),on:{click:this.emitClose}})},onClosed:function(){this.$emit("closed")},swipeTo:function(t,e){this.$refs.swipe&&this.$refs.swipe.swipeTo(t,e)}},render:function(){var t=arguments[0];if(this.shouldRender)return t("transition",{attrs:{name:"van-fade"},on:{afterLeave:this.onClosed}},[t("div",{directives:[{name:"show",value:this.value}],class:[m(),this.className]},[this.genClose(),this.genImages(),this.genIndex(),this.genCover()])])}}),M=i("a142"),N={loop:!0,value:!0,images:[],maxZoom:3,minZoom:1/3,onClose:null,onChange:null,className:"",showIndex:!0,closeable:!1,closeIcon:"clear",asyncClose:!1,getContainer:"body",startPosition:0,swipeDuration:300,showIndicators:!1,closeOnPopstate:!0,closeIconPosition:"top-right"},Y=function(){R=new(c["a"].extend(A))({el:document.createElement("div")}),document.body.appendChild(R.$el),R.$on("change",(function(t){R.onChange&&R.onChange(t)})),R.$on("scale",(function(t){R.onScale&&R.onScale(t)}))},L=function(t,e){if(void 0===e&&(e=0),!M["g"]){R||Y();var i=Array.isArray(t)?{images:t,startPosition:e}:t;return Object(r["a"])(R,N,i),R.$once("input",(function(t){R.value=t})),R.$once("closed",(function(){R.images=[]})),i.onClose&&(R.$off("close"),R.$once("close",i.onClose)),R}};L.Component=A,L.install=function(){c["a"].use(A)};var X=L,D=i("c24f"),H=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"comment-list"},[i("van-cell",{attrs:{title:"c"===t.type?"全部回复":"全部评论"}}),i("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了",error:t.error,"error-text":"请求失败，点击重新加载"},on:{load:t.onLoad,"update:error":function(e){t.error=e}},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.list,(function(e,n){return i("comment-item",{key:n,attrs:{comment:e},on:{"reply-click":function(e){return t.$emit("reply-click",e)}}})})),1)],1)},B=[],W=(i("d3b7"),i("25f0"),i("2909")),F=i("b775"),Z=function(t){return Object(F["a"])({method:"GET",url:"/app/v1_0/comments",params:t})},G=function(t){return Object(F["a"])({method:"POST",url:"/app/v1_0/comment/likings",data:{target:t}})},q=function(t){return Object(F["a"])({method:"DELETE",url:"/app/v1_0/comment/likings/".concat(t)})},V=function(t){return Object(F["a"])({method:"POST",url:"/app/v1_0/comments",data:t})},U=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("van-cell",{staticClass:"comment-item",scopedSlots:t._u([{key:"icon",fn:function(){return[i("van-image",{staticClass:"avatar",attrs:{width:"36",height:"36",fit:"cover",round:"",src:"https://img01.yzcdn.cn/vant/cat.jpeg"}})]},proxy:!0},{key:"title",fn:function(){return[i("div",{staticClass:"title-wrap"},[i("div",{staticClass:"name"},[t._v(t._s(t.comment.aut_name))]),i("div",{staticClass:"like-wrap",on:{click:t.onCommentLike}},[i("van-icon",{staticClass:"like-icon",class:{liked:t.comment.is_liking},attrs:{name:t.comment.is_liking?"good-job":"good-job-o"}}),i("span",{staticClass:"like-count"},[t._v(t._s(t.comment.like_count))])],1)]),i("div",{staticClass:"content"},[t._v(t._s(t.comment.content))]),i("div",{staticClass:"pubdate-wrap"},[i("span",{staticClass:"pubdate"},[t._v(t._s(t._f("datetime")(t.comment.pubdate,"YYYY-MM-DD HH:mm")))]),i("van-button",{staticClass:"reply-btn",attrs:{round:"",size:"mini"},on:{click:function(e){return t.$emit("reply-click",t.comment)}}},[t._v("回复 "+t._s(t.comment.reply_count))])],1)]},proxy:!0}])})},J=[],K={props:{comment:{type:Object,required:!0}},methods:{onCommentLike:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.comment.is_liking){e.next=6;break}return e.next=3,q(t.comment.com_id.toString());case 3:t.comment.like_count--,e.next=9;break;case 6:return e.next=8,G(t.comment.com_id.toString());case 8:t.comment.like_count++;case 9:t.comment.is_liking=!t.comment.is_liking;case 10:case"end":return e.stop()}}),e)})))()}}},Q=K,tt=(i("0a3b"),i("2877")),et=Object(tt["a"])(Q,U,J,!1,null,"1a862780",null),it=et.exports,nt={props:{source:{type:[Number,String,Object],required:!0},type:{type:String,default:"a"},list:{type:Array,default:function(){return[]}}},data:function(){return{loading:!1,finished:!1,error:!1,offset:null,limit:10}},components:{CommentItem:it},methods:{onLoad:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var i,n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Z({type:t.type,source:t.source.toString(),offset:t.offset,limit:t.limit});case 3:n=e.sent,o=n.data,t.$emit("update-total-count",o.data.total_count),console.log(o),(i=t.list).push.apply(i,Object(W["a"])(o.data.results)),t.loading=!1,o.data.results.length?t.offset=o.data.last_id:t.finished=!0,e.next=16;break;case 12:e.prev=12,e.t0=e["catch"](0),t.loading=!1,t.error=!0;case 16:case"end":return e.stop()}}),e,null,[[0,12]])})))()}}},ot=nt,st=Object(tt["a"])(ot,H,B,!1,null,null,null),at=st.exports,rt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("van-cell-group",{staticClass:"post-comment"},[i("van-field",{attrs:{placeholder:"请输入留言","show-word-limit":"",maxlength:"50",rows:"2",autosize:"",type:"textarea"},model:{value:t.message,callback:function(e){t.message="string"===typeof e?e.trim():e},expression:"message"}}),i("van-button",{staticClass:"post-btn",attrs:{size:"mini",plain:"",type:"info",disabled:!t.message},on:{click:t.onPost}},[t._v("发布")])],1)},ct=[],lt={props:{target:{type:[Number,String,Object],required:!0},articleId:{type:[Number,String,Object],default:null}},data:function(){return{message:""}},methods:{onPost:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var i,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.$toast.loading({message:"发布中...",forbidClick:!0}),e.prev=1,e.next=4,V({target:t.target.toString(),content:t.message,art_id:t.articleId?t.articleId.toString():null});case 4:i=e.sent,n=i.data,console.log(n),t.$emit("post-success",n.data.new_obj),t.$toast.success("发布成功！"),t.message="",e.next=17;break;case 12:e.prev=12,e.t0=e["catch"](1),t.message="",t.$emit("post-fail"),t.$toast.fail("文章拒绝发表评论。");case 17:case"end":return e.stop()}}),e,null,[[1,12]])})))()}}},ut=lt,ht=(i("e1b2"),Object(tt["a"])(ut,rt,ct,!1,null,"1332f7ec",null)),mt=ht.exports,ft=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"comment-reply"},[i("van-nav-bar",{attrs:{title:t.comment.reply_count+"条回复"},scopedSlots:t._u([{key:"left",fn:function(){return[i("van-icon",{attrs:{name:"cross"},on:{click:function(e){return t.$emit("close")}}})]},proxy:!0}])}),i("comment-item",{attrs:{comment:t.comment},on:{"reply-click":function(e){t.isPostShow=!0}}}),i("comment-list",{attrs:{source:t.comment.com_id,type:"c",list:t.commentList},on:{"reply-click":t.onReplyClick}}),i("div",{staticClass:"article-bottom"},[i("van-button",{staticClass:"comment-btn",attrs:{type:"default",round:"",size:"small"},on:{click:function(e){t.isPostShow=!0}}},[t._v("写评论")])],1),i("van-popup",{attrs:{position:"bottom"},model:{value:t.isPostShow,callback:function(e){t.isPostShow=e},expression:"isPostShow"}},[i("post-comment",{attrs:{target:t.comment.com_id,"article-id":t.articleId},on:{"post-success":t.onPostSuccess}})],1)],1)},dt=[],pt={props:{comment:{type:Object,required:!0},articleId:{type:[String,Number,Object],required:!0}},components:{CommentItem:it,CommentList:at,PostComment:mt},data:function(){return{isPostShow:!1,commentList:[]}},methods:{onPostSuccess:function(t){this.commentList.unshift(t),this.comment.reply_count++,this.isPostShow=!1},onReplyClick:function(){console.log("回复评论")}}},vt=pt,gt=(i("dc30"),Object(tt["a"])(vt,ft,dt,!1,null,"86db1ad0",null)),bt=gt.exports,yt={props:{articleId:{type:[String,Number,Object],required:!0}},data:function(){return{article:{},isFollowLoading:!1,isCollectLoading:!1,isPostShow:!1,isReplyShow:!1,commentList:[],totalCommentCount:0,replyComment:{}}},components:{CommentList:at,PostComment:mt,CommentReply:bt},created:function(){this.loadArticle()},methods:{loadArticle:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var i,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(a["e"])(t.articleId);case 2:i=e.sent,n=i.data,console.log(n),t.article=n.data,t.$nextTick((function(){t.handlePreviewImage()}));case 7:case"end":return e.stop()}}),e)})))()},handlePreviewImage:function(){var t=this.$refs["article-content"],e=t.querySelectorAll("img"),i=[];e.forEach((function(t,e){i.push(t.src),t.onclick=function(){X({images:i,startPosition:e})}}))},onFollow:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.isFollowLoading=!0,!t.article.is_followed){e.next=6;break}return e.next=4,Object(D["b"])(t.article.aut_id);case 4:e.next=8;break;case 6:return e.next=8,Object(D["a"])(t.article.aut_id);case 8:t.article.is_followed=!t.article.is_followed,t.isFollowLoading=!1;case 10:case"end":return e.stop()}}),e)})))()},onCollect:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.$toast.loading({duration:0,forbidClick:!0,message:"操作中..."}),e.prev=1,!t.article.is_collected){e.next=7;break}return e.next=5,Object(a["c"])(t.articleId);case 5:e.next=9;break;case 7:return e.next=9,Object(a["a"])(t.articleId);case 9:e.next=15;break;case 11:return e.prev=11,e.t0=e["catch"](1),t.$toast.fail("请求失败, 请重试！"),e.abrupt("return");case 15:t.article.is_collected=!t.article.is_collected,t.$toast.success(t.article.is_collected?"收藏成功":"取消收藏");case 17:case"end":return e.stop()}}),e,null,[[1,11]])})))()},onLike:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.$toast.loading({duration:0,forbidClick:!0,message:"操作中..."}),e.prev=1,1!==t.article.attitude){e.next=8;break}return e.next=5,Object(a["d"])(t.articleId);case 5:t.article.attitude=-1,e.next=11;break;case 8:return e.next=10,Object(a["b"])(t.articleId);case 10:t.article.attitude=1;case 11:e.next=17;break;case 13:return e.prev=13,e.t0=e["catch"](1),t.$toast.fail("请求失败, 请重试！"),e.abrupt("return");case 17:t.$toast.success(1===t.article.attitude?"点赞成功":"取消点赞");case 18:case"end":return e.stop()}}),e,null,[[1,13]])})))()},onPostSuccess:function(t){console.log(t),this.commentList.unshift(t),this.totalCommentCount++,this.isPostShow=!1},onComment:function(){this.$refs["comment-list"].$el.scrollIntoView()},onReplayClick:function(t){console.log("onReplayClick",t),this.replyComment=t,this.isReplyShow=!0}}},wt=yt,St=(i("c73c"),Object(tt["a"])(wt,n,o,!1,null,"76957802",null));e["default"]=St.exports},2423:function(t,e,i){"use strict";i.d(e,"f",(function(){return o})),i.d(e,"e",(function(){return s})),i.d(e,"a",(function(){return a})),i.d(e,"c",(function(){return r})),i.d(e,"b",(function(){return c})),i.d(e,"d",(function(){return l}));var n=i("b775"),o=function(t){return Object(n["a"])({method:"GET",url:"/app/v1_1/articles",params:t})},s=function(t){return Object(n["a"])({method:"GET",url:"/app/v1_0/articles/".concat(t)})},a=function(t){return Object(n["a"])({method:"POST",url:"/app/v1_0/article/collections",data:{target:t}})},r=function(t){return Object(n["a"])({method:"DELETE",url:"/app/v1_0/article/collections/".concat(t)})},c=function(t){return Object(n["a"])({method:"POST",url:"/app/v1_0/article/likings",data:{target:t}})},l=function(t){return Object(n["a"])({method:"DELETE",url:"/app/v1_0/article/likings/".concat(t)})}},"25f0":function(t,e,i){"use strict";var n=i("6eeb"),o=i("825a"),s=i("d039"),a=i("ad6d"),r="toString",c=RegExp.prototype,l=c[r],u=s((function(){return"/a/b"!=l.call({source:"a",flags:"b"})})),h=l.name!=r;(u||h)&&n(RegExp.prototype,r,(function(){var t=o(this),e=String(t.source),i=t.flags,n=String(void 0===i&&t instanceof RegExp&&!("flags"in c)?a.call(t):i);return"/"+e+"/"+n}),{unsafe:!0})},2909:function(t,e,i){"use strict";function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function o(t){if(Array.isArray(t))return n(t)}i.d(e,"a",(function(){return c}));i("a4d3"),i("e01a"),i("d28b"),i("a630"),i("d3b7"),i("3ca3"),i("ddb0");function s(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}i("fb6a"),i("b0c0"),i("25f0");function a(t,e){if(t){if("string"===typeof t)return n(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?n(t,e):void 0}}function r(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(t){return o(t)||s(t)||a(t)||r()}},"4df4":function(t,e,i){"use strict";var n=i("0366"),o=i("7b0b"),s=i("9bdd"),a=i("e95a"),r=i("50c4"),c=i("8418"),l=i("35a1");t.exports=function(t){var e,i,u,h,m,f,d=o(t),p="function"==typeof this?this:Array,v=arguments.length,g=v>1?arguments[1]:void 0,b=void 0!==g,y=l(d),w=0;if(b&&(g=n(g,v>2?arguments[2]:void 0,2)),void 0==y||p==Array&&a(y))for(e=r(d.length),i=new p(e);e>w;w++)f=b?g(d[w],w):d[w],c(i,w,f);else for(h=y.call(d),m=h.next,i=new p;!(u=m.call(h)).done;w++)f=b?s(h,g,[u.value,w],!0):u.value,c(i,w,f);return i.length=w,i}},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,i){var n=i("1d80"),o=i("5899"),s="["+o+"]",a=RegExp("^"+s+s+"*"),r=RegExp(s+s+"*$"),c=function(t){return function(e){var i=String(n(e));return 1&t&&(i=i.replace(a,"")),2&t&&(i=i.replace(r,"")),i}};t.exports={start:c(1),end:c(2),trim:c(3)}},7156:function(t,e,i){var n=i("861d"),o=i("d2bb");t.exports=function(t,e,i){var s,a;return o&&"function"==typeof(s=e.constructor)&&s!==i&&n(a=s.prototype)&&a!==i.prototype&&o(t,a),t}},"9bdd":function(t,e,i){var n=i("825a"),o=i("2a62");t.exports=function(t,e,i,s){try{return s?e(n(i)[0],i[1]):e(i)}catch(a){throw o(t),a}}},a630:function(t,e,i){var n=i("23e7"),o=i("4df4"),s=i("1c7e"),a=!s((function(t){Array.from(t)}));n({target:"Array",stat:!0,forced:a},{from:o})},a9e3:function(t,e,i){"use strict";var n=i("83ab"),o=i("da84"),s=i("94ca"),a=i("6eeb"),r=i("5135"),c=i("c6b6"),l=i("7156"),u=i("c04e"),h=i("d039"),m=i("7c73"),f=i("241c").f,d=i("06cf").f,p=i("9bf2").f,v=i("58a8").trim,g="Number",b=o[g],y=b.prototype,w=c(m(y))==g,S=function(t){var e,i,n,o,s,a,r,c,l=u(t,!1);if("string"==typeof l&&l.length>2)if(l=v(l),e=l.charCodeAt(0),43===e||45===e){if(i=l.charCodeAt(2),88===i||120===i)return NaN}else if(48===e){switch(l.charCodeAt(1)){case 66:case 98:n=2,o=49;break;case 79:case 111:n=8,o=55;break;default:return+l}for(s=l.slice(2),a=s.length,r=0;r<a;r++)if(c=s.charCodeAt(r),c<48||c>o)return NaN;return parseInt(s,n)}return+l};if(s(g,!b(" 0o1")||!b("0b1")||b("+0x1"))){for(var x,C=function(t){var e=arguments.length<1?0:t,i=this;return i instanceof C&&(w?h((function(){y.valueOf.call(i)})):c(i)!=g)?l(new b(S(e)),i,C):S(e)},k=n?f(b):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),_=0;k.length>_;_++)r(b,x=k[_])&&!r(C,x)&&p(C,x,d(b,x));C.prototype=y,y.constructor=C,a(o,g,C)}},b0c0:function(t,e,i){var n=i("83ab"),o=i("9bf2").f,s=Function.prototype,a=s.toString,r=/^\s*function ([^ (]*)/,c="name";n&&!(c in s)&&o(s,c,{configurable:!0,get:function(){try{return a.call(this).match(r)[1]}catch(t){return""}}})},c24f:function(t,e,i){"use strict";i.d(e,"f",(function(){return o})),i.d(e,"g",(function(){return s})),i.d(e,"c",(function(){return a})),i.d(e,"d",(function(){return r})),i.d(e,"a",(function(){return c})),i.d(e,"b",(function(){return l})),i.d(e,"e",(function(){return u})),i.d(e,"i",(function(){return h})),i.d(e,"h",(function(){return m}));var n=i("b775"),o=function(t){return Object(n["a"])({method:"post",url:"/app/v1_0/authorizations",data:t})},s=function(t){return Object(n["a"])({method:"GET",url:"/app/v1_0/sms/codes/".concat(t)})},a=function(){return Object(n["a"])({method:"GET",url:"/app/v1_0/user"})},r=function(){return Object(n["a"])({method:"GET",url:"/app/v1_0/user/channels"})},c=function(t){return Object(n["a"])({method:"POST",url:"/app/v1_0/user/followings",data:{target:t}})},l=function(t){return Object(n["a"])({method:"DELETE",url:"/app/v1_0/user/followings/".concat(t)})},u=function(){return Object(n["a"])({method:"GET",url:"/app/v1_0/user/profile"})},h=function(t){return Object(n["a"])({method:"PATCH",url:"/app/v1_0/user/profile",data:t})},m=function(t){return Object(n["a"])({method:"PATCH",url:"/app/v1_0/user/photo",data:t})}},c34c:function(t,e,i){},c73c:function(t,e,i){"use strict";i("d324")},c7dd:function(t,e,i){},d324:function(t,e,i){},dc30:function(t,e,i){"use strict";i("e1f5")},e1b2:function(t,e,i){"use strict";i("c7dd")},e1f5:function(t,e,i){},fb6a:function(t,e,i){"use strict";var n=i("23e7"),o=i("861d"),s=i("e8b5"),a=i("23cb"),r=i("50c4"),c=i("fc6a"),l=i("8418"),u=i("b622"),h=i("1dde"),m=i("ae40"),f=h("slice"),d=m("slice",{ACCESSORS:!0,0:0,1:2}),p=u("species"),v=[].slice,g=Math.max;n({target:"Array",proto:!0,forced:!f||!d},{slice:function(t,e){var i,n,u,h=c(this),m=r(h.length),f=a(t,m),d=a(void 0===e?m:e,m);if(s(h)&&(i=h.constructor,"function"!=typeof i||i!==Array&&!s(i.prototype)?o(i)&&(i=i[p],null===i&&(i=void 0)):i=void 0,i===Array||void 0===i))return v.call(h,f,d);for(n=new(void 0===i?Array:i)(g(d-f,0)),u=0;f<d;f++,u++)f in h&&l(n,u,h[f]);return n.length=u,n}})}}]);
//# sourceMappingURL=chunk-cacb23b2.e84ef339.js.map